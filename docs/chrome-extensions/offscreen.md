Title: chrome.offscreen

URL Source: https://developer.chrome.com/docs/extensions/reference/api/offscreen

Markdown Content:
chrome.offscreen | API | Chrome for Developers

===============
[Skip to main content](https://developer.chrome.com/docs/extensions/reference/api/offscreen#main-content)

[![Image 1: Chrome for Developers](https://www.gstatic.com/devrel-devsite/prod/v90b15eef664021f94a1ab8a4ca14c533325a9006d6183b165fb79714a6fcd6a0/chrome/images/lockup.svg)](https://developer.chrome.com/)

[Docs](https://developer.chrome.com/docs)

- Build with Chrome
- Learn how Chrome works, participate in origin trials, and build with Chrome everywhere.
- [Web Platform](https://developer.chrome.com/docs/web-platform)
- [Capabilities](https://developer.chrome.com/docs/capabilities)
- [ChromeDriver](https://developer.chrome.com/docs/chromedriver)
- [Extensions](https://developer.chrome.com/docs/extensions)
- [Chrome Web Store](https://developer.chrome.com/docs/webstore)
- [Chromium](https://developer.chrome.com/docs/chromium)
- [Aurora](https://developer.chrome.com/docs/aurora)
- [Web on Android](https://developer.chrome.com/docs/android)
- [Origin trials](https://developer.chrome.com/origintrials/)
- [Release notes](https://developer.chrome.com/release-notes)

- Productivity
- Create the best experience for your users with the web's best tools.
- [DevTools](https://developer.chrome.com/docs/devtools)
- [Lighthouse](https://developer.chrome.com/docs/lighthouse)
- [Chrome UX Report](https://developer.chrome.com/docs/crux)
- [Accessibility](https://developer.chrome.com/docs/accessibility)

- Get things done quicker and neater, with our ready-made libraries.
- [Workbox](https://developer.chrome.com/docs/workbox)
- [Puppeteer](https://developer.chrome.com/docs/puppeteer)

- Experience
- Design a beautiful and performant web with Chrome.
- [AI](https://developer.chrome.com/docs/ai)
- [Performance](https://developer.chrome.com/docs/performance)
- [CSS and UI](https://developer.chrome.com/docs/css-ui)
- [Identity](https://developer.chrome.com/docs/identity)
- [Payments](https://developer.chrome.com/docs/payments)
- [Privacy and security](https://developer.chrome.com/docs/privacy-security)

- Resources
- More from Chrome and Google.
- [All documentation](https://developer.chrome.com/docs)
- [Baseline](https://web.dev/baseline)
- [web.dev](https://web.dev/)
- [PageSpeed Insights audit](https://pagespeed.web.dev/)
- [The Privacy Sandbox](https://developers.google.com/privacy-sandbox)
- [Isolated Web Apps (IWA)](https://developer.chrome.com/docs/iwa)

More

[Case studies](https://developer.chrome.com/case-studies)[Blog](https://developer.chrome.com/blog)[New in Chrome](https://developer.chrome.com/new)

/

- [English](https://developer.chrome.com/docs/extensions/reference/api/offscreen)
- [Deutsch](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=de)
- [Español – América Latina](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=es-419)
- [Français](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=fr)
- [Indonesia](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=id)
- [Italiano](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=it)
- [Nederlands](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=nl)
- [Polski](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=pl)
- [Português – Brasil](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=pt-br)
- [Tiếng Việt](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=vi)
- [Türkçe](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=tr)
- [Русский](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=ru)
- [עברית](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=he)
- [العربيّة](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=ar)
- [فارسی](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=fa)
- [हिंदी](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=hi)
- [বাংলা](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=bn)
- [ภาษาไทย](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=th)
- [中文 – 简体](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=zh-cn)
- [中文 – 繁體](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=zh-tw)
- [日本語](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=ja)
- [한국어](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=ko)

[Sign in](https://developer.chrome.com/_d/signin?continue=https%3A%2F%2Fdeveloper.chrome.com%2Fdocs%2Fextensions%2Freference%2Fapi%2Foffscreen&prompt=select_account)

- [Chrome Extensions](https://developer.chrome.com/docs/extensions)
- [Reference](https://developer.chrome.com/docs/extensions/reference)
- [API](https://developer.chrome.com/docs/extensions/reference/api)

[Overview](https://developer.chrome.com/docs/extensions)[Get Started](https://developer.chrome.com/docs/extensions/get-started)[Develop](https://developer.chrome.com/docs/extensions/develop)[How To](https://developer.chrome.com/docs/extensions/how-to)[AI](https://developer.chrome.com/docs/extensions/ai)[Reference](https://developer.chrome.com/docs/extensions/reference)

- [API](https://developer.chrome.com/docs/extensions/reference/api)
- [Permissions](https://developer.chrome.com/docs/extensions/reference/permissions-list)
- [Manifest](https://developer.chrome.com/docs/extensions/reference/manifest)

[Samples](https://developer.chrome.com/docs/extensions/samples)[Chrome Web Store](https://developer.chrome.com/docs/webstore)

- [Prepare your Extension](https://developer.chrome.com/docs/webstore/prepare)
- [Publish in the Chrome Web Store](https://developer.chrome.com/docs/webstore/publish)
- [Program Policies](https://developer.chrome.com/docs/webstore/program-policies)

More

[![Image 2: Chrome for Developers](https://www.gstatic.com/devrel-devsite/prod/v90b15eef664021f94a1ab8a4ca14c533325a9006d6183b165fb79714a6fcd6a0/chrome/images/lockup.svg)](https://developer.chrome.com/)

- [Docs](https://developer.chrome.com/docs)
  - More

  - [Overview](https://developer.chrome.com/docs/extensions)
  - [Get Started](https://developer.chrome.com/docs/extensions/get-started)
  - [Develop](https://developer.chrome.com/docs/extensions/develop)
  - [How To](https://developer.chrome.com/docs/extensions/how-to)
  - [AI](https://developer.chrome.com/docs/extensions/ai)
  - [Reference](https://developer.chrome.com/docs/extensions/reference)
    - More

  - [Samples](https://developer.chrome.com/docs/extensions/samples)
  - [Chrome Web Store](https://developer.chrome.com/docs/webstore)
    - More

- [Case studies](https://developer.chrome.com/case-studies)
- [Blog](https://developer.chrome.com/blog)
- [New in Chrome](https://developer.chrome.com/new)

- Manifest V3
- [➡ Manifest V2](https://developer.chrome.com/docs/extensions/mv2/reference)
- [accessibilityFeatures](https://developer.chrome.com/docs/extensions/reference/api/accessibilityFeatures)
- [action](https://developer.chrome.com/docs/extensions/reference/api/action)
- [alarms](https://developer.chrome.com/docs/extensions/reference/api/alarms)
- [audio](https://developer.chrome.com/docs/extensions/reference/api/audio)
- [bookmarks](https://developer.chrome.com/docs/extensions/reference/api/bookmarks)
- [browsingData](https://developer.chrome.com/docs/extensions/reference/api/browsingData)
- [certificateProvider](https://developer.chrome.com/docs/extensions/reference/api/certificateProvider)
- [commands](https://developer.chrome.com/docs/extensions/reference/api/commands)
- [contentSettings](https://developer.chrome.com/docs/extensions/reference/api/contentSettings)
- [contextMenus](https://developer.chrome.com/docs/extensions/reference/api/contextMenus)
- [cookies](https://developer.chrome.com/docs/extensions/reference/api/cookies)
- [debugger](https://developer.chrome.com/docs/extensions/reference/api/debugger)
- [declarativeContent](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent)
- [declarativeNetRequest](https://developer.chrome.com/docs/extensions/reference/api/declarativeNetRequest)
- [desktopCapture](https://developer.chrome.com/docs/extensions/reference/api/desktopCapture)
- [devtools.inspectedWindow](https://developer.chrome.com/docs/extensions/reference/api/devtools/inspectedWindow)
- [devtools.network](https://developer.chrome.com/docs/extensions/reference/api/devtools/network)
- [devtools.panels](https://developer.chrome.com/docs/extensions/reference/api/devtools/panels)
- [devtools.performance](https://developer.chrome.com/docs/extensions/reference/api/devtools/performance)
- [devtools.recorder](https://developer.chrome.com/docs/extensions/reference/api/devtools/recorder)
- [dns](https://developer.chrome.com/docs/extensions/reference/api/dns)
- [documentScan](https://developer.chrome.com/docs/extensions/reference/api/documentScan)
- [dom](https://developer.chrome.com/docs/extensions/reference/api/dom)
- [downloads](https://developer.chrome.com/docs/extensions/reference/api/downloads)
- [enterprise.deviceAttributes](https://developer.chrome.com/docs/extensions/reference/api/enterprise/deviceAttributes)
- [enterprise.hardwarePlatform](https://developer.chrome.com/docs/extensions/reference/api/enterprise/hardwarePlatform)
- [enterprise.login](https://developer.chrome.com/docs/extensions/reference/api/enterprise/login)
- [enterprise.networkingAttributes](https://developer.chrome.com/docs/extensions/reference/api/enterprise/networkingAttributes)
- [enterprise.platformKeys](https://developer.chrome.com/docs/extensions/reference/api/enterprise/platformKeys)
- [events](https://developer.chrome.com/docs/extensions/reference/api/events)
- [extension](https://developer.chrome.com/docs/extensions/reference/api/extension)
- [extensionTypes](https://developer.chrome.com/docs/extensions/reference/api/extensionTypes)
- [fileBrowserHandler](https://developer.chrome.com/docs/extensions/reference/api/fileBrowserHandler)
- [fileSystemProvider](https://developer.chrome.com/docs/extensions/reference/api/fileSystemProvider)
- [fontSettings](https://developer.chrome.com/docs/extensions/reference/api/fontSettings)
- [gcm](https://developer.chrome.com/docs/extensions/reference/api/gcm)
- [history](https://developer.chrome.com/docs/extensions/reference/api/history)
- [i18n](https://developer.chrome.com/docs/extensions/reference/api/i18n)
- [identity](https://developer.chrome.com/docs/extensions/reference/api/identity)
- [idle](https://developer.chrome.com/docs/extensions/reference/api/idle)
- [input.ime](https://developer.chrome.com/docs/extensions/reference/api/input/ime)
- [instance ID](https://developer.chrome.com/docs/extensions/reference/api/instanceID)
- [login State](https://developer.chrome.com/docs/extensions/reference/api/loginState)
- [management](https://developer.chrome.com/docs/extensions/reference/api/management)
- [notifications](https://developer.chrome.com/docs/extensions/reference/api/notifications)
- [offscreen](https://developer.chrome.com/docs/extensions/reference/api/offscreen)
- [omnibox](https://developer.chrome.com/docs/extensions/reference/api/omnibox)
- [page Capture](https://developer.chrome.com/docs/extensions/reference/api/pageCapture)
- [permissions](https://developer.chrome.com/docs/extensions/reference/api/permissions)
- [platform Keys](https://developer.chrome.com/docs/extensions/reference/api/platformKeys)
- [power](https://developer.chrome.com/docs/extensions/reference/api/power)
- [printer Provider](https://developer.chrome.com/docs/extensions/reference/api/printerProvider)
- [printing](https://developer.chrome.com/docs/extensions/reference/api/printing)
- [printing Metrics](https://developer.chrome.com/docs/extensions/reference/api/printingMetrics)
- [privacy](https://developer.chrome.com/docs/extensions/reference/api/privacy)
- [processes](https://developer.chrome.com/docs/extensions/reference/api/processes)
- [proxy](https://developer.chrome.com/docs/extensions/reference/api/proxy)
- [readingList](https://developer.chrome.com/docs/extensions/reference/api/readingList)
- [runtime](https://developer.chrome.com/docs/extensions/reference/api/runtime)
- [scripting](https://developer.chrome.com/docs/extensions/reference/api/scripting)
- [search](https://developer.chrome.com/docs/extensions/reference/api/search)
- [sessions](https://developer.chrome.com/docs/extensions/reference/api/sessions)
- [sidePanel](https://developer.chrome.com/docs/extensions/reference/api/sidePanel)
- [storage](https://developer.chrome.com/docs/extensions/reference/api/storage)
- [system.cpu](https://developer.chrome.com/docs/extensions/reference/api/system/cpu)
- [system.display](https://developer.chrome.com/docs/extensions/reference/api/system/display)
- [system.memory](https://developer.chrome.com/docs/extensions/reference/api/system/memory)
- [system.storage](https://developer.chrome.com/docs/extensions/reference/api/system/storage)
- [systemLog](https://developer.chrome.com/docs/extensions/reference/api/systemLog)
- [tabCapture](https://developer.chrome.com/docs/extensions/reference/api/tabCapture)
- [tabGroups](https://developer.chrome.com/docs/extensions/reference/api/tabGroups)
- [tabs](https://developer.chrome.com/docs/extensions/reference/api/tabs)
- [topSites](https://developer.chrome.com/docs/extensions/reference/api/topSites)
- [tts](https://developer.chrome.com/docs/extensions/reference/api/tts)
- [ttsEngine](https://developer.chrome.com/docs/extensions/reference/api/ttsEngine)
- [types](https://developer.chrome.com/docs/extensions/reference/api/types)
- [userScripts](https://developer.chrome.com/docs/extensions/reference/api/userScripts)
- [vpnProvider](https://developer.chrome.com/docs/extensions/reference/api/vpnProvider)
- [wallpaper](https://developer.chrome.com/docs/extensions/reference/api/wallpaper)
- [webAuthenticationProxy](https://developer.chrome.com/docs/extensions/reference/api/webAuthenticationProxy)
- [webNavigation](https://developer.chrome.com/docs/extensions/reference/api/webNavigation)
- [webRequest](https://developer.chrome.com/docs/extensions/reference/api/webRequest)
- [windows](https://developer.chrome.com/docs/extensions/reference/api/windows)

- Build with Chrome
- [Web Platform](https://developer.chrome.com/docs/web-platform)
- [Capabilities](https://developer.chrome.com/docs/capabilities)
- [ChromeDriver](https://developer.chrome.com/docs/chromedriver)
- [Extensions](https://developer.chrome.com/docs/extensions)
- [Chrome Web Store](https://developer.chrome.com/docs/webstore)
- [Chromium](https://developer.chrome.com/docs/chromium)
- [Aurora](https://developer.chrome.com/docs/aurora)
- [Web on Android](https://developer.chrome.com/docs/android)
- [Origin trials](https://developer.chrome.com/origintrials/)
- [Release notes](https://developer.chrome.com/release-notes)
- Productivity
- [DevTools](https://developer.chrome.com/docs/devtools)
- [Lighthouse](https://developer.chrome.com/docs/lighthouse)
- [Chrome UX Report](https://developer.chrome.com/docs/crux)
- [Accessibility](https://developer.chrome.com/docs/accessibility)
- [Workbox](https://developer.chrome.com/docs/workbox)
- [Puppeteer](https://developer.chrome.com/docs/puppeteer)
- Experience
- [AI](https://developer.chrome.com/docs/ai)
- [Performance](https://developer.chrome.com/docs/performance)
- [CSS and UI](https://developer.chrome.com/docs/css-ui)
- [Identity](https://developer.chrome.com/docs/identity)
- [Payments](https://developer.chrome.com/docs/payments)
- [Privacy and security](https://developer.chrome.com/docs/privacy-security)
- Resources
- [All documentation](https://developer.chrome.com/docs)
- [Baseline](https://web.dev/baseline)
- [web.dev](https://web.dev/)
- [PageSpeed Insights audit](https://pagespeed.web.dev/)
- [The Privacy Sandbox](https://developers.google.com/privacy-sandbox)
- [Isolated Web Apps (IWA)](https://developer.chrome.com/docs/iwa)

- [API](https://developer.chrome.com/docs/extensions/reference/api)
- [Permissions](https://developer.chrome.com/docs/extensions/reference/permissions-list)
- [Manifest](https://developer.chrome.com/docs/extensions/reference/manifest)

- [Prepare your Extension](https://developer.chrome.com/docs/webstore/prepare)
- [Publish in the Chrome Web Store](https://developer.chrome.com/docs/webstore/publish)
- [Program Policies](https://developer.chrome.com/docs/webstore/program-policies)

- On this page
- [Description](https://developer.chrome.com/docs/extensions/reference/api/offscreen#description)
- [Permissions](https://developer.chrome.com/docs/extensions/reference/api/offscreen#permissions)
- [Availability](https://developer.chrome.com/docs/extensions/reference/api/offscreen#availability)
- [Concepts and usage](https://developer.chrome.com/docs/extensions/reference/api/offscreen#concepts_and_usage)
  - [Reasons](https://developer.chrome.com/docs/extensions/reference/api/offscreen#reasons)

- [Examples](https://developer.chrome.com/docs/extensions/reference/api/offscreen#examples)
  - [Maintain the lifecycle of an offscreen document](https://developer.chrome.com/docs/extensions/reference/api/offscreen#maintain_the_lifecycle_of_an_offscreen_document)
  - [Before Chrome 116: check if an offscreen document is open](https://developer.chrome.com/docs/extensions/reference/api/offscreen#before_chrome_116_check_if_an_offscreen_document_is_open)

- [Types](https://developer.chrome.com/docs/extensions/reference/api/offscreen#type)
  - [CreateParameters](https://developer.chrome.com/docs/extensions/reference/api/offscreen#type-CreateParameters)
  - [Reason](https://developer.chrome.com/docs/extensions/reference/api/offscreen#type-Reason)

- [Methods](https://developer.chrome.com/docs/extensions/reference/api/offscreen#method)
  - [closeDocument()](https://developer.chrome.com/docs/extensions/reference/api/offscreen#method-closeDocument)
  - [createDocument()](https://developer.chrome.com/docs/extensions/reference/api/offscreen#method-createDocument)

- [Home](https://developer.chrome.com/)
- [Docs](https://developer.chrome.com/docs)
- [Chrome Extensions](https://developer.chrome.com/docs/extensions)
- [Reference](https://developer.chrome.com/docs/extensions/reference)
- [API](https://developer.chrome.com/docs/extensions/reference/api)

Was this helpful?

chrome.offscreen

# bookmark_border bookmark Stay organized with collections Save and categorize content based on your preferences.

- On this page
- [Description](https://developer.chrome.com/docs/extensions/reference/api/offscreen#description)
- [Permissions](https://developer.chrome.com/docs/extensions/reference/api/offscreen#permissions)
- [Availability](https://developer.chrome.com/docs/extensions/reference/api/offscreen#availability)
- [Concepts and usage](https://developer.chrome.com/docs/extensions/reference/api/offscreen#concepts_and_usage)
  - [Reasons](https://developer.chrome.com/docs/extensions/reference/api/offscreen#reasons)

- [Examples](https://developer.chrome.com/docs/extensions/reference/api/offscreen#examples)
  - [Maintain the lifecycle of an offscreen document](https://developer.chrome.com/docs/extensions/reference/api/offscreen#maintain_the_lifecycle_of_an_offscreen_document)
  - [Before Chrome 116: check if an offscreen document is open](https://developer.chrome.com/docs/extensions/reference/api/offscreen#before_chrome_116_check_if_an_offscreen_document_is_open)

- [Types](https://developer.chrome.com/docs/extensions/reference/api/offscreen#type)
  - [CreateParameters](https://developer.chrome.com/docs/extensions/reference/api/offscreen#type-CreateParameters)
  - [Reason](https://developer.chrome.com/docs/extensions/reference/api/offscreen#type-Reason)

- [Methods](https://developer.chrome.com/docs/extensions/reference/api/offscreen#method)
  - [closeDocument()](https://developer.chrome.com/docs/extensions/reference/api/offscreen#method-closeDocument)
  - [createDocument()](https://developer.chrome.com/docs/extensions/reference/api/offscreen#method-createDocument)

## Description

Use the `offscreen` API to create and manage offscreen documents.

## Permissions

`offscreen`

To use the Offscreen API, declare the `"offscreen"` permission in the [extension manifest](https://developer.chrome.com/docs/extensions/reference/manifest). For example:

```
{
  "name": "My extension",
  ...
  "permissions": [
    "offscreen"
  ],
  ...
}
```

## Availability

Chrome 109+ MV3+

## Concepts and usage

Service workers don't have DOM access, and many websites have content security policies that limit the functionality of content scripts. The Offscreen API allows the extension to use DOM APIs in a hidden document without interrupting the user experience by opening new windows or tabs. The [`runtime`](https://developer.chrome.com/docs/extensions/reference/runtime) API is the only extensions API supported by offscreen documents.

Pages loaded as offscreen documents are handled differently from other types of extension pages. The extension's permissions carry over to offscreen documents, but with limits on extension API access. For example, because the [`chrome.runtime`](https://developer.chrome.com/docs/extensions/reference/api/runtime) API is the only extensions API supported by offscreen documents, messaging must be handled using members of that API.

The following are other ways offscreen documents behave differently from normal pages:

- An offscreen document's URL must be a static HTML file bundled with the extension.
- Offscreen documents can't be focused.
- An offscreen document is an instance of [`window`](https://developer.mozilla.org/docs/Web/API/Window), but the value of its `opener` property is always `null`.
- Though an extension package can contain multiple offscreen documents, an installed extension can only have one open at a time. If the extension is running in split mode with an active incognito profile, the normal and incognito profiles can each have one offscreen document.

Use [`chrome.offscreen.createDocument()`](https://developer.chrome.com/docs/extensions/reference/api/offscreen#method-createDocument) and [`chrome.offscreen.closeDocument()`](https://developer.chrome.com/docs/extensions/reference/api/offscreen#method-closeDocument) to create and close an offscreen document. `createDocument()` requires the document's `url`, a reason, and a justification:

```
chrome.offscreen.createDocument({
  url: 'off_screen.html',
  reasons: ['CLIPBOARD'],
  justification: 'reason for needing the document',
});
```

### Reasons

For a list of valid reasons, see the [Reasons](https://developer.chrome.com/docs/extensions/reference/api/offscreen#type-Reason) section. Reasons are set during document creation to determine the document's lifespan. The `AUDIO_PLAYBACK` reason sets the document to close after 30 seconds without audio playing. All other reasons don't set lifetime limits.

## Examples

### Maintain the lifecycle of an offscreen document

The following example shows how to ensure that an offscreen document exists. The `setupOffscreenDocument()` function calls [`runtime.getContexts()`](https://developer.chrome.com/docs/extensions/reference/api/runtime#method-getContexts) to find an existing offscreen document, or creates the document if it doesn't already exist.

```
let creating; // A global promise to avoid concurrency issues
async function setupOffscreenDocument(path) {
  // Check all windows controlled by the service worker to see if one
  // of them is the offscreen document with the given path
  const offscreenUrl = chrome.runtime.getURL(path);
  const existingContexts = await chrome.runtime.getContexts({
    contextTypes: ['OFFSCREEN_DOCUMENT'],
    documentUrls: [offscreenUrl]
  });

  if (existingContexts.length > 0) {
    return;
  }

  // create offscreen document
  if (creating) {
    await creating;
  } else {
    creating = chrome.offscreen.createDocument({
      url: path,
      reasons: ['CLIPBOARD'],
      justification: 'reason for needing the document',
    });
    await creating;
    creating = null;
  }
}
```

Before sending a message to an offscreen document, call `setupOffscreenDocument()` to make sure the document exists, as demonstrated in the following example.

```
chrome.action.onClicked.addListener(async () => {
  await setupOffscreenDocument('off_screen.html');

  // Send message to offscreen document
  chrome.runtime.sendMessage({
    type: '...',
    target: 'offscreen',
    data: '...'
  });
});
```

For complete examples, see the [offscreen-clipboard](https://github.com/GoogleChrome/chrome-extensions-samples/tree/main/functional-samples/cookbook.offscreen-clipboard-write) and [offscreen-dom](https://github.com/GoogleChrome/chrome-extensions-samples/tree/main/functional-samples/cookbook.offscreen-dom) demos on GitHub.

### Before Chrome 116: check if an offscreen document is open

[`runtime.getContexts()`](https://developer.chrome.com/docs/extensions/reference/api/runtime#method-getContexts) was added in Chrome 116. In earlier versions of Chrome, use [`clients.matchAll()`](https://developer.mozilla.org/docs/Web/API/Clients/matchAll) to check for an existing offscreen document:

```
async function hasOffscreenDocument() {
  if ('getContexts' in chrome.runtime) {
    const contexts = await chrome.runtime.getContexts({
      contextTypes: ['OFFSCREEN_DOCUMENT'],
      documentUrls: [OFFSCREEN_DOCUMENT_PATH]
    });
    return Boolean(contexts.length);
  } else {
    const matchedClients = await clients.matchAll();
    return matchedClients.some(client => {
      return client.url.includes(chrome.runtime.id);
    });
  }
}
```

## Types

### CreateParameters

#### Properties

- justification string  
  A developer-provided string that explains, in more detail, the need for the background context. The user agent _may_ use this in display to the user.

- reasons [Reason](https://developer.chrome.com/docs/extensions/reference/api/offscreen#type-Reason)[]  
  The reason(s) the extension is creating the offscreen document.

- url string  
  The (relative) URL to load in the document.

### Reason

#### Enum

"TESTING"

A reason used for testing purposes only.

"AUDIO_PLAYBACK"

Specifies that the offscreen document is responsible for playing audio.

"IFRAME_SCRIPTING"

Specifies that the offscreen document needs to embed and script an iframe in order to modify the iframe's content.

"DOM_SCRAPING"

Specifies that the offscreen document needs to embed an iframe and scrape its DOM to extract information.

"BLOBS"

Specifies that the offscreen document needs to interact with Blob objects (including `URL.createObjectURL()`).

"DOM_PARSER"

Specifies that the offscreen document needs to use the [DOMParser API](https://developer.mozilla.org/en-US/docs/Web/API/DOMParser).

"USER_MEDIA"

Specifies that the offscreen document needs to interact with media streams from user media (e.g. `getUserMedia()`).

"DISPLAY_MEDIA"

Specifies that the offscreen document needs to interact with media streams from display media (e.g. `getDisplayMedia()`).

"WEB_RTC"

Specifies that the offscreen document needs to use [WebRTC APIs](https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API).

"CLIPBOARD"

Specifies that the offscreen document needs to interact with the [Clipboard API](https://developer.mozilla.org/en-US/docs/Web/API/Clipboard_API).

"LOCAL_STORAGE"

Specifies that the offscreen document needs access to [localStorage](https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage).

"WORKERS"

Specifies that the offscreen document needs to spawn workers.

"BATTERY_STATUS"

Specifies that the offscreen document needs to use [navigator.getBattery](https://developer.mozilla.org/en-US/docs/Web/API/Battery_Status_API).

"MATCH_MEDIA"

Specifies that the offscreen document needs to use [window.matchMedia](https://developer.mozilla.org/en-US/docs/Web/API/Window/matchMedia).

"GEOLOCATION"

Specifies that the offscreen document needs to use [navigator.geolocation](https://developer.mozilla.org/en-US/docs/Web/API/Navigator/geolocation).

## Methods

### closeDocument()

chrome.offscreen.closeDocument(): Promise<void>
Closes the currently-open offscreen document for the extension.

#### Returns

- Promise<void>

### createDocument()

chrome.offscreen.createDocument(

  parameters: [CreateParameters](https://developer.chrome.com/docs/extensions/reference/api/offscreen#type-CreateParameters),

): Promise<void>
Creates a new offscreen document for the extension.

#### Parameters

- parameters [CreateParameters](https://developer.chrome.com/docs/extensions/reference/api/offscreen#type-CreateParameters)  
  The parameters describing the offscreen document to create.

#### Returns

- Promise<void>

Was this helpful?

Except as otherwise noted, the content of this page is licensed under the [Creative Commons Attribution 4.0 License](https://creativecommons.org/licenses/by/4.0/), and code samples are licensed under the [Apache 2.0 License](https://www.apache.org/licenses/LICENSE-2.0). For details, see the [Google Developers Site Policies](https://developers.google.com/site-policies). Java is a registered trademark of Oracle and/or its affiliates.

Last updated 2025-08-11 UTC.

[[["Easy to understand","easyToUnderstand","thumb-up"],["Solved my problem","solvedMyProblem","thumb-up"],["Other","otherUp","thumb-up"]],[["Missing the information I need","missingTheInformationINeed","thumb-down"],["Too complicated / too many steps","tooComplicatedTooManySteps","thumb-down"],["Out of date","outOfDate","thumb-down"],["Samples / code issue","samplesCodeIssue","thumb-down"],["Other","otherDown","thumb-down"]],["Last updated 2025-08-11 UTC."],[],[]]

- ### Contribute
  - [File a bug](https://issuetracker.google.com/issues/new?component=1400036&template=1897236)
  - [See open issues](https://issuetracker.google.com/issues?q=status:open%20componentid:1400036&s=created_time:desc)

- ### Related content
  - [Chromium updates](https://blog.chromium.org/)
  - [Case studies](https://developer.chrome.com/case-studies)
  - [Archive](https://developer.chrome.com/deprecated)
  - [Podcasts & shows](https://web.dev/shows)

- ### Follow
  - [@ChromiumDev on X](https://twitter.com/ChromiumDev)
  - [YouTube](https://www.youtube.com/user/ChromeDevelopers)
  - [Chrome for Developers on LinkedIn](https://www.linkedin.com/showcase/chrome-for-developers)
  - [RSS](https://developer.chrome.com/static/blog/feed.xml)

- [Terms](https://policies.google.com/terms)
- [Privacy](https://policies.google.com/privacy)
- [Manage cookies](https://developer.chrome.com/docs/extensions/reference/api/offscreen#)

- [English](https://developer.chrome.com/docs/extensions/reference/api/offscreen)
- [Deutsch](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=de)
- [Español – América Latina](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=es-419)
- [Français](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=fr)
- [Indonesia](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=id)
- [Italiano](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=it)
- [Nederlands](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=nl)
- [Polski](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=pl)
- [Português – Brasil](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=pt-br)
- [Tiếng Việt](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=vi)
- [Türkçe](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=tr)
- [Русский](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=ru)
- [עברית](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=he)
- [العربيّة](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=ar)
- [فارسی](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=fa)
- [हिंदी](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=hi)
- [বাংলা](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=bn)
- [ภาษาไทย](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=th)
- [中文 – 简体](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=zh-cn)
- [中文 – 繁體](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=zh-tw)
- [日本語](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=ja)
- [한국어](https://developer.chrome.com/docs/extensions/reference/api/offscreen?hl=ko)
