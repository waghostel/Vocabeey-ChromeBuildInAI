Title: chrome.declarativeContent

URL Source: https://developer.chrome.com/docs/extensions/reference/api/declarativeContent

Markdown Content:
chrome.declarativeContent | API | Chrome for Developers

===============
[Skip to main content](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#main-content)

[![Image 1: Chrome for Developers](https://www.gstatic.com/devrel-devsite/prod/v90b15eef664021f94a1ab8a4ca14c533325a9006d6183b165fb79714a6fcd6a0/chrome/images/lockup.svg)](https://developer.chrome.com/)

[Docs](https://developer.chrome.com/docs)

- Build with Chrome
- Learn how Chrome works, participate in origin trials, and build with Chrome everywhere.
- [Web Platform](https://developer.chrome.com/docs/web-platform)
- [Capabilities](https://developer.chrome.com/docs/capabilities)
- [ChromeDriver](https://developer.chrome.com/docs/chromedriver)
- [Extensions](https://developer.chrome.com/docs/extensions)
- [Chrome Web Store](https://developer.chrome.com/docs/webstore)
- [Chromium](https://developer.chrome.com/docs/chromium)
- [Aurora](https://developer.chrome.com/docs/aurora)
- [Web on Android](https://developer.chrome.com/docs/android)
- [Origin trials](https://developer.chrome.com/origintrials/)
- [Release notes](https://developer.chrome.com/release-notes)

- Productivity
- Create the best experience for your users with the web's best tools.
- [DevTools](https://developer.chrome.com/docs/devtools)
- [Lighthouse](https://developer.chrome.com/docs/lighthouse)
- [Chrome UX Report](https://developer.chrome.com/docs/crux)
- [Accessibility](https://developer.chrome.com/docs/accessibility)

- Get things done quicker and neater, with our ready-made libraries.
- [Workbox](https://developer.chrome.com/docs/workbox)
- [Puppeteer](https://developer.chrome.com/docs/puppeteer)

- Experience
- Design a beautiful and performant web with Chrome.
- [AI](https://developer.chrome.com/docs/ai)
- [Performance](https://developer.chrome.com/docs/performance)
- [CSS and UI](https://developer.chrome.com/docs/css-ui)
- [Identity](https://developer.chrome.com/docs/identity)
- [Payments](https://developer.chrome.com/docs/payments)
- [Privacy and security](https://developer.chrome.com/docs/privacy-security)

- Resources
- More from Chrome and Google.
- [All documentation](https://developer.chrome.com/docs)
- [Baseline](https://web.dev/baseline)
- [web.dev](https://web.dev/)
- [PageSpeed Insights audit](https://pagespeed.web.dev/)
- [The Privacy Sandbox](https://developers.google.com/privacy-sandbox)
- [Isolated Web Apps (IWA)](https://developer.chrome.com/docs/iwa)

More

[Case studies](https://developer.chrome.com/case-studies)[Blog](https://developer.chrome.com/blog)[New in Chrome](https://developer.chrome.com/new)

/

- [English](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent)
- [Deutsch](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=de)
- [Español – América Latina](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=es-419)
- [Français](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=fr)
- [Indonesia](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=id)
- [Italiano](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=it)
- [Nederlands](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=nl)
- [Polski](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=pl)
- [Português – Brasil](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=pt-br)
- [Tiếng Việt](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=vi)
- [Türkçe](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=tr)
- [Русский](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=ru)
- [עברית](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=he)
- [العربيّة](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=ar)
- [فارسی](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=fa)
- [हिंदी](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=hi)
- [বাংলা](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=bn)
- [ภาษาไทย](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=th)
- [中文 – 简体](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=zh-cn)
- [中文 – 繁體](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=zh-tw)
- [日本語](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=ja)
- [한국어](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=ko)

[Sign in](https://developer.chrome.com/_d/signin?continue=https%3A%2F%2Fdeveloper.chrome.com%2Fdocs%2Fextensions%2Freference%2Fapi%2FdeclarativeContent&prompt=select_account)

- [Chrome Extensions](https://developer.chrome.com/docs/extensions)
- [Reference](https://developer.chrome.com/docs/extensions/reference)
- [API](https://developer.chrome.com/docs/extensions/reference/api)

[Overview](https://developer.chrome.com/docs/extensions)[Get Started](https://developer.chrome.com/docs/extensions/get-started)[Develop](https://developer.chrome.com/docs/extensions/develop)[How To](https://developer.chrome.com/docs/extensions/how-to)[AI](https://developer.chrome.com/docs/extensions/ai)[Reference](https://developer.chrome.com/docs/extensions/reference)

- [API](https://developer.chrome.com/docs/extensions/reference/api)
- [Permissions](https://developer.chrome.com/docs/extensions/reference/permissions-list)
- [Manifest](https://developer.chrome.com/docs/extensions/reference/manifest)

[Samples](https://developer.chrome.com/docs/extensions/samples)[Chrome Web Store](https://developer.chrome.com/docs/webstore)

- [Prepare your Extension](https://developer.chrome.com/docs/webstore/prepare)
- [Publish in the Chrome Web Store](https://developer.chrome.com/docs/webstore/publish)
- [Program Policies](https://developer.chrome.com/docs/webstore/program-policies)

More

[![Image 2: Chrome for Developers](https://www.gstatic.com/devrel-devsite/prod/v90b15eef664021f94a1ab8a4ca14c533325a9006d6183b165fb79714a6fcd6a0/chrome/images/lockup.svg)](https://developer.chrome.com/)

- [Docs](https://developer.chrome.com/docs)
  - More

  - [Overview](https://developer.chrome.com/docs/extensions)
  - [Get Started](https://developer.chrome.com/docs/extensions/get-started)
  - [Develop](https://developer.chrome.com/docs/extensions/develop)
  - [How To](https://developer.chrome.com/docs/extensions/how-to)
  - [AI](https://developer.chrome.com/docs/extensions/ai)
  - [Reference](https://developer.chrome.com/docs/extensions/reference)
    - More

  - [Samples](https://developer.chrome.com/docs/extensions/samples)
  - [Chrome Web Store](https://developer.chrome.com/docs/webstore)
    - More

- [Case studies](https://developer.chrome.com/case-studies)
- [Blog](https://developer.chrome.com/blog)
- [New in Chrome](https://developer.chrome.com/new)

- Manifest V3
- [➡ Manifest V2](https://developer.chrome.com/docs/extensions/mv2/reference)
- [accessibilityFeatures](https://developer.chrome.com/docs/extensions/reference/api/accessibilityFeatures)
- [action](https://developer.chrome.com/docs/extensions/reference/api/action)
- [alarms](https://developer.chrome.com/docs/extensions/reference/api/alarms)
- [audio](https://developer.chrome.com/docs/extensions/reference/api/audio)
- [bookmarks](https://developer.chrome.com/docs/extensions/reference/api/bookmarks)
- [browsing Data](https://developer.chrome.com/docs/extensions/reference/api/browsingData)
- [certificate Provider](https://developer.chrome.com/docs/extensions/reference/api/certificateProvider)
- [commands](https://developer.chrome.com/docs/extensions/reference/api/commands)
- [content Settings](https://developer.chrome.com/docs/extensions/reference/api/contentSettings)
- [context Menus](https://developer.chrome.com/docs/extensions/reference/api/contextMenus)
- [cookies](https://developer.chrome.com/docs/extensions/reference/api/cookies)
- [debugger](https://developer.chrome.com/docs/extensions/reference/api/debugger)
- [declarative Content](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent)
- [declarative Net Request](https://developer.chrome.com/docs/extensions/reference/api/declarativeNetRequest)
- [desktop Capture](https://developer.chrome.com/docs/extensions/reference/api/desktopCapture)
- [devtools.inspected Window](https://developer.chrome.com/docs/extensions/reference/api/devtools/inspectedWindow)
- [devtools.network](https://developer.chrome.com/docs/extensions/reference/api/devtools/network)
- [devtools.panels](https://developer.chrome.com/docs/extensions/reference/api/devtools/panels)
- [devtools.performance](https://developer.chrome.com/docs/extensions/reference/api/devtools/performance)
- [devtools.recorder](https://developer.chrome.com/docs/extensions/reference/api/devtools/recorder)
- [dns](https://developer.chrome.com/docs/extensions/reference/api/dns)
- [document Scan](https://developer.chrome.com/docs/extensions/reference/api/documentScan)
- [dom](https://developer.chrome.com/docs/extensions/reference/api/dom)
- [downloads](https://developer.chrome.com/docs/extensions/reference/api/downloads)
- [enterprise.deviceAttributes](https://developer.chrome.com/docs/extensions/reference/api/enterprise/deviceAttributes)
- [enterprise.hardwarePlatform](https://developer.chrome.com/docs/extensions/reference/api/enterprise/hardwarePlatform)
- [enterprise.login](https://developer.chrome.com/docs/extensions/reference/api/enterprise/login)
- [enterprise.networkingAttributes](https://developer.chrome.com/docs/extensions/reference/api/enterprise/networkingAttributes)
- [enterprise.platformKeys](https://developer.chrome.com/docs/extensions/reference/api/enterprise/platformKeys)
- [events](https://developer.chrome.com/docs/extensions/reference/api/events)
- [extension](https://developer.chrome.com/docs/extensions/reference/api/extension)
- [extensionTypes](https://developer.chrome.com/docs/extensions/reference/api/extensionTypes)
- [fileBrowserHandler](https://developer.chrome.com/docs/extensions/reference/api/fileBrowserHandler)
- [fileSystemProvider](https://developer.chrome.com/docs/extensions/reference/api/fileSystemProvider)
- [fontSettings](https://developer.chrome.com/docs/extensions/reference/api/fontSettings)
- [gcm](https://developer.chrome.com/docs/extensions/reference/api/gcm)
- [history](https://developer.chrome.com/docs/extensions/reference/api/history)
- [i18n](https://developer.chrome.com/docs/extensions/reference/api/i18n)
- [identity](https://developer.chrome.com/docs/extensions/reference/api/identity)
- [idle](https://developer.chrome.com/docs/extensions/reference/api/idle)
- [input.ime](https://developer.chrome.com/docs/extensions/reference/api/input/ime)
- [instanceID](https://developer.chrome.com/docs/extensions/reference/api/instanceID)
- [loginState](https://developer.chrome.com/docs/extensions/reference/api/loginState)
- [management](https://developer.chrome.com/docs/extensions/reference/api/management)
- [notifications](https://developer.chrome.com/docs/extensions/reference/api/notifications)
- [offscreen](https://developer.chrome.com/docs/extensions/reference/api/offscreen)
- [omnibox](https://developer.chrome.com/docs/extensions/reference/api/omnibox)
- [pageCapture](https://developer.chrome.com/docs/extensions/reference/api/pageCapture)
- [permissions](https://developer.chrome.com/docs/extensions/reference/api/permissions)
- [platformKeys](https://developer.chrome.com/docs/extensions/reference/api/platformKeys)
- [power](https://developer.chrome.com/docs/extensions/reference/api/power)
- [printerProvider](https://developer.chrome.com/docs/extensions/reference/api/printerProvider)
- [printing](https://developer.chrome.com/docs/extensions/reference/api/printing)
- [printingMetrics](https://developer.chrome.com/docs/extensions/reference/api/printingMetrics)
- [privacy](https://developer.chrome.com/docs/extensions/reference/api/privacy)
- [processes](https://developer.chrome.com/docs/extensions/reference/api/processes)
- [proxy](https://developer.chrome.com/docs/extensions/reference/api/proxy)
- [readingList](https://developer.chrome.com/docs/extensions/reference/api/readingList)
- [runtime](https://developer.chrome.com/docs/extensions/reference/api/runtime)
- [scripting](https://developer.chrome.com/docs/extensions/reference/api/scripting)
- [search](https://developer.chrome.com/docs/extensions/reference/api/search)
- [sessions](https://developer.chrome.com/docs/extensions/reference/api/sessions)
- [sidePanel](https://developer.chrome.com/docs/extensions/reference/api/sidePanel)
- [storage](https://developer.chrome.com/docs/extensions/reference/api/storage)
- [system.cpu](https://developer.chrome.com/docs/extensions/reference/api/system/cpu)
- [system.display](https://developer.chrome.com/docs/extensions/reference/api/system/display)
- [system.memory](https://developer.chrome.com/docs/extensions/reference/api/system/memory)
- [system.storage](https://developer.chrome.com/docs/extensions/reference/api/system/storage)
- [systemLog](https://developer.chrome.com/docs/extensions/reference/api/systemLog)
- [tabCapture](https://developer.chrome.com/docs/extensions/reference/api/tabCapture)
- [tabGroups](https://developer.chrome.com/docs/extensions/reference/api/tabGroups)
- [tabs](https://developer.chrome.com/docs/extensions/reference/api/tabs)
- [topSites](https://developer.chrome.com/docs/extensions/reference/api/topSites)
- [tts](https://developer.chrome.com/docs/extensions/reference/api/tts)
- [ttsEngine](https://developer.chrome.com/docs/extensions/reference/api/ttsEngine)
- [types](https://developer.chrome.com/docs/extensions/reference/api/types)
- [userScripts](https://developer.chrome.com/docs/extensions/reference/api/userScripts)
- [vpnProvider](https://developer.chrome.com/docs/extensions/reference/api/vpnProvider)
- [wallpaper](https://developer.chrome.com/docs/extensions/reference/api/wallpaper)
- [webAuthenticationProxy](https://developer.chrome.com/docs/extensions/reference/api/webAuthenticationProxy)
- [webNavigation](https://developer.chrome.com/docs/extensions/reference/api/webNavigation)
- [webRequest](https://developer.chrome.com/docs/extensions/reference/api/webRequest)
- [windows](https://developer.chrome.com/docs/extensions/reference/api/windows)

- Build with Chrome
- [Web Platform](https://developer.chrome.com/docs/web-platform)
- [Capabilities](https://developer.chrome.com/docs/capabilities)
- [ChromeDriver](https://developer.chrome.com/docs/chromedriver)
- [Extensions](https://developer.chrome.com/docs/extensions)
- [Chrome Web Store](https://developer.chrome.com/docs/webstore)
- [Chromium](https://developer.chrome.com/docs/chromium)
- [Aurora](https://developer.chrome.com/docs/aurora)
- [Web on Android](https://developer.chrome.com/docs/android)
- [Origin trials](https://developer.chrome.com/origintrials/)
- [Release notes](https://developer.chrome.com/release-notes)
- Productivity
- [DevTools](https://developer.chrome.com/docs/devtools)
- [Lighthouse](https://developer.chrome.com/docs/lighthouse)
- [Chrome UX Report](https://developer.chrome.com/docs/crux)
- [Accessibility](https://developer.chrome.com/docs/accessibility)
- [Workbox](https://developer.chrome.com/docs/workbox)
- [Puppeteer](https://developer.chrome.com/docs/puppeteer)
- Experience
- [AI](https://developer.chrome.com/docs/ai)
- [Performance](https://developer.chrome.com/docs/performance)
- [CSS and UI](https://developer.chrome.com/docs/css-ui)
- [Identity](https://developer.chrome.com/docs/identity)
- [Payments](https://developer.chrome.com/docs/payments)
- [Privacy and security](https://developer.chrome.com/docs/privacy-security)
- Resources
- [All documentation](https://developer.chrome.com/docs)
- [Baseline](https://web.dev/baseline)
- [web.dev](https://web.dev/)
- [PageSpeed Insights audit](https://pagespeed.web.dev/)
- [The Privacy Sandbox](https://developers.google.com/privacy-sandbox)
- [Isolated Web Apps (IWA)](https://developer.chrome.com/docs/iwa)

- [API](https://developer.chrome.com/docs/extensions/reference/api)
- [Permissions](https://developer.chrome.com/docs/extensions/reference/permissions-list)
- [Manifest](https://developer.chrome.com/docs/extensions/reference/manifest)

- [Prepare your Extension](https://developer.chrome.com/docs/webstore/prepare)
- [Publish in the Chrome Web Store](https://developer.chrome.com/docs/webstore/publish)
- [Program Policies](https://developer.chrome.com/docs/webstore/program-policies)

- On this page
- [Description](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#description)
- [Permissions](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#permissions)
- [Concepts and usage](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#concepts_and_usage)
  - [Rules](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#rules)
  - [Page URL matching](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#page-url)
  - [CSS Matching](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#css)
  - [Bookmarked state matching](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#bookmarked)

- [Types](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type)
  - [ImageDataType](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-ImageDataType)
  - [PageStateMatcher](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-PageStateMatcher)
  - [RequestContentScript](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-RequestContentScript)
  - [SetIcon](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-SetIcon)
  - [ShowAction](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-ShowAction)
  - [ShowPageAction](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-ShowPageAction)

- [Events](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#event)
  - [onPageChanged](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#event-onPageChanged)

- [Home](https://developer.chrome.com/)
- [Docs](https://developer.chrome.com/docs)
- [Chrome Extensions](https://developer.chrome.com/docs/extensions)
- [Reference](https://developer.chrome.com/docs/extensions/reference)
- [API](https://developer.chrome.com/docs/extensions/reference/api)

Was this helpful?

chrome.declarative Content

# bookmark_border bookmark Stay organized with collections Save and categorize content based on your preferences.

- On this page
- [Description](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#description)
- [Permissions](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#permissions)
- [Concepts and usage](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#concepts_and_usage)
  - [Rules](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#rules)
  - [Page URL matching](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#page-url)
  - [CSS Matching](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#css)
  - [Bookmarked state matching](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#bookmarked)

- [Types](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type)
  - [ImageDataType](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-ImageDataType)
  - [PageStateMatcher](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-PageStateMatcher)
  - [RequestContentScript](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-RequestContentScript)
  - [SetIcon](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-SetIcon)
  - [ShowAction](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-ShowAction)
  - [ShowPageAction](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-ShowPageAction)

- [Events](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#event)
  - [onPageChanged](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#event-onPageChanged)

## Description

Use the `chrome.declarativeContent` API to take actions depending on the content of a page, without requiring permission to read the page's content.

## Permissions

`declarativeContent`

## Concepts and usage

**Key term:** An [extension's _action_](https://developer.chrome.com/docs/extensions/reference/api/action) controls the extension's toolbar icon.
The Declarative Content API lets you enable your extension's action depending on the URL of a web page, or if a CSS selector matches an element on the page, without needing to add [host permissions](https://developer.chrome.com/docs/extensions/develop/concepts/declare-permissions#host-permissions) or inject a [content script](https://developer.chrome.com/docs/extensions/develop/concepts/content-scripts).

Use the [activeTab](https://developer.chrome.com/docs/extensions/develop/concepts/activeTab) permission to interact with a page after the user clicks on the extension's action.

### Rules

Rules consists of conditions and actions. If any of the conditions is fulfilled, all actions are executed. The actions are [`setIcon()`](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-SetIcon) and [`showAction()`](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-ShowAction).

The [`PageStateMatcher`](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-PageStateMatcher) matches web pages if and only if all listed criteria are met. It can match a [page url](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#page-url), a [css compound selector](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#css) or the [bookmarked state](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#bookmarked) of a page. The following rule enables the extension's action on Google pages when a password field is present:

```
let rule1 = {
  conditions: [
    new chrome.declarativeContent.PageStateMatcher({
      pageUrl: { hostSuffix: '.google.com', schemes: ['https'] },
      css: ["input[type='password']"]
    })
  ],
  actions: [ new chrome.declarativeContent.ShowAction() ]
};
```

**Success:** All conditions and actions are created using a constructor as shown in the previous example.
To also enable the extension's action for Google sites with a video, you can add a second condition, as each condition is sufficient to trigger all specified actions:

```
let rule2 = {
  conditions: [
    new chrome.declarativeContent.PageStateMatcher({
      pageUrl: { hostSuffix: '.google.com', schemes: ['https'] },
      css: ["input[type='password']"]
    }),
    new chrome.declarativeContent.PageStateMatcher({
      css: ["video"]
    })
  ],
  actions: [ new chrome.declarativeContent.ShowAction() ]
};
```

The [`onPageChanged`](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#event-onPageChanged) event tests whether any rule has at least one fulfilled condition and executes the actions. Rules persist across browsing sessions; therefore, during extension installation time you should first use [`removeRules`](https://developer.chrome.com/docs/extensions/reference/api/events#remove_rules) to clear previously installed rules and then use [`addRules`](https://developer.chrome.com/docs/extensions/reference/api/events#add_rules) to register new ones.

```
chrome.runtime.onInstalled.addListener(function(details) {
  chrome.declarativeContent.onPageChanged.removeRules(undefined, function() {
    chrome.declarativeContent.onPageChanged.addRules([rule2]);
  });
});
```

**Note:** You should always register or unregister rules in bulk because each of these operations recreates internal data structures. This re-creation is computationally expensive but facilitates a faster matching algorithm.
With the [activeTab](https://developer.chrome.com/docs/extensions/develop/concepts/activeTab) permission, your extension won't display any permission warnings and when the user clicks the extension action, it will only run on relevant pages.

### Page URL matching

The [`PageStateMatcher.pageurl`](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#property-PageStateMatcher-pageUrl) matches when the URL criteria are fulfilled. The most common criteria are a concatenation of either host, path, or URL, followed by Contains, Equals, Prefix, or Suffix. The following table contains a few examples:

| Criteria                                  | Matches                         |
| ----------------------------------------- | ------------------------------- |
| `{ hostSuffix: 'google.com' }`            | All Google URLs                 |
| `{ pathPrefix: '/docs/extensions'` }      | Extension docs URLs             |
| `{ urlContains: 'developer.chrome.com'` } | All chrome developers docs URLs |

All criteria are case sensitive. For a complete list of criteria, see [UrlFilter](https://developer.chrome.com/docs/extensions/reference/api/events#type-UrlFilter).

### CSS Matching

[`PageStateMatcher.css`](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#property-PageStateMatcher-css) conditions must be _[compound selectors](https://www.w3.org/TR/selectors4/#compound)_, meaning that you can't include [combinators](https://developer.mozilla.org/docs/Web/CSS/CSS_Selectors#combinators) like whitespace or "`>`" in your selectors. This helps Chrome match the selectors more efficiently.

| Compound Selectors (OK)       | Complex Selectors (Not OK) |
| ----------------------------- | -------------------------- | -------- |
| `a`                           | `div p`                    |
| `iframe.special[src^='http']` | `p>span.highlight`         |
| `ns                           | \*`                        | `p + ol` |
| `#abcd:checked`               | `p::first-line`            |

CSS conditions only match displayed elements: if an element that matches your selector is `display:none` or one of its parent elements is `display:none`, it doesn't cause the condition to match. Elements styled with `visibility:hidden`, positioned off-screen, or hidden by other elements can still make your condition match.

### Bookmarked state matching

The [`PageStateMatcher.isBookmarked`](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#property-PageStateMatcher-isBookmarked) condition allows matching of the bookmarked state of the current URL in the user's profile. To make use of this condition the "bookmarks" permission must be declared in the extension [manifest](https://developer.chrome.com/docs/extensions/reference/manifest).

## Types

### ImageDataType

See [https://developer.mozilla.org/en-US/docs/Web/API/ImageData](https://developer.mozilla.org/en-US/docs/Web/API/ImageData).

#### Type

ImageData

### PageStateMatcher

Matches the state of a web page based on various criteria.

#### Properties

- constructor void  
  The `constructor` function looks like:

(arg: [PageStateMatcher](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-PageStateMatcher))=>{...}

    *   arg [PageStateMatcher](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-PageStateMatcher)

    *   returns [PageStateMatcher](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-PageStateMatcher)

- css string[]optional  
  Matches if all of the CSS selectors in the array match displayed elements in a frame with the same origin as the page's main frame. All selectors in this array must be [compound selectors](https://www.w3.org/TR/selectors4/#compound) to speed up matching. Note: Listing hundreds of CSS selectors or listing CSS selectors that match hundreds of times per page can slow down web sites.

- isBookmarked boolean optional Chrome 45+  
  Matches if the bookmarked state of the page is equal to the specified value. Requres the [bookmarks permission](https://developer.chrome.com/docs/extensions/develop/concepts/declare-permissions).

- pageUrl [UrlFilter](https://developer.chrome.com/docs/extensions/reference/events/#type-UrlFilter)optional  
  Matches if the conditions of the `UrlFilter` are fulfilled for the top-level URL of the page.

### RequestContentScript

Declarative event action that injects a content script.

**WARNING:** This action is still experimental and is not supported on stable builds of Chrome.

#### Properties

- constructor void  
  The `constructor` function looks like:

(arg: [RequestContentScript](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-RequestContentScript))=>{...}

    *   arg [RequestContentScript](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-RequestContentScript)

    *   returns [RequestContentScript](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-RequestContentScript)

- allFrames boolean optional  
  Whether the content script runs in all frames of the matching page, or in only the top frame. Default is `false`.

- css string[]optional  
  Names of CSS files to be injected as a part of the content script.

- js string[]optional  
  Names of JavaScript files to be injected as a part of the content script.

- matchAboutBlank boolean optional  
  Whether to insert the content script on `about:blank` and `about:srcdoc`. Default is `false`.

### SetIcon

Declarative event action that sets the n-dip square icon for the extension's [page action](https://developer.chrome.com/docs/extensions/reference/pageAction/) or [browser action](https://developer.chrome.com/docs/extensions/reference/browserAction/) while the corresponding conditions are met. This action can be used without [host permissions](https://developer.chrome.com/docs/extensions/develop/concepts/declare-permissions#host-permissions), but the extension must have a page or browser action.

Exactly one of `imageData` or `path` must be specified. Both are dictionaries mapping a number of pixels to an image representation. The image representation in `imageData` is an [ImageData](https://developer.mozilla.org/en-US/docs/Web/API/ImageData) object; for example, from a `canvas` element, while the image representation in `path` is the path to an image file relative to the extension's manifest. If `scale` screen pixels fit into a device-independent pixel, the `scale * n` icon is used. If that scale is missing, another image is resized to the required size.

#### Properties

- constructor void  
  The `constructor` function looks like:

(arg: [SetIcon](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-SetIcon))=>{...}

    *   arg [SetIcon](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-SetIcon)

    *   returns [SetIcon](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-SetIcon)

- imageData ImageData|object optional  
  Either an `ImageData` object or a dictionary {size -> ImageData} representing an icon to be set. If the icon is specified as a dictionary, the image used is chosen depending on the screen's pixel density. If the number of image pixels that fit into one screen space unit equals `scale`, then an image with size `scale * n` is selected, where _n_ is the size of the icon in the UI. At least one image must be specified. Note that `details.imageData = foo` is equivalent to `details.imageData = {'16': foo}`.

### ShowAction

Chrome 97+

A declarative event action that sets the extension's toolbar [action](https://developer.chrome.com/docs/extensions/reference/action/) to an enabled state while the corresponding conditions are met. This action can be used without [host permissions](https://developer.chrome.com/docs/extensions/develop/concepts/declare-permissions#host-permissions). If the extension has the [activeTab](https://developer.chrome.com/docs/extensions/develop/concepts/activeTab) permission, clicking the page action grants access to the active tab.

On pages where the conditions are not met the extension's toolbar action will be grey-scale, and clicking it will open the context menu, instead of triggering the action.

#### Properties

- constructor void  
  The `constructor` function looks like:

(arg: [ShowAction](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-ShowAction))=>{...}

    *   arg [ShowAction](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-ShowAction)

    *   returns [ShowAction](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-ShowAction)

### ShowPageAction

Deprecated since Chrome 97

Please use [`declarativeContent.ShowAction`](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-ShowAction).

A declarative event action that sets the extension's [page action](https://developer.chrome.com/docs/extensions/reference/pageAction/) to an enabled state while the corresponding conditions are met. This action can be used without [host permissions](https://developer.chrome.com/docs/extensions/develop/concepts/declare-permissions#host-permissions), but the extension must have a page action. If the extension has the [activeTab](https://developer.chrome.com/docs/extensions/develop/concepts/activeTab) permission, clicking the page action grants access to the active tab.

On pages where the conditions are not met the extension's toolbar action will be grey-scale, and clicking it will open the context menu, instead of triggering the action.

#### Properties

- constructor void  
  The `constructor` function looks like:

(arg: [ShowPageAction](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-ShowPageAction))=>{...}

    *   arg [ShowPageAction](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-ShowPageAction)

    *   returns [ShowPageAction](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-ShowPageAction)

## Events

### onPageChanged

Provides the [Declarative Event API](https://developer.chrome.com/docs/extensions/reference/api/events#declarative_event_handlers) consisting of `addRules`, `removeRules`, and `getRules`.

#### Conditions

[PageStateMatcher](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-PageStateMatcher)

#### Actions

[RequestContentScript](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-RequestContentScript)

[SetIcon](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-SetIcon)

[ShowPageAction](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-ShowPageAction)

[ShowAction](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#type-ShowAction)

Was this helpful?

Except as otherwise noted, the content of this page is licensed under the [Creative Commons Attribution 4.0 License](https://creativecommons.org/licenses/by/4.0/), and code samples are licensed under the [Apache 2.0 License](https://www.apache.org/licenses/LICENSE-2.0). For details, see the [Google Developers Site Policies](https://developers.google.com/site-policies). Java is a registered trademark of Oracle and/or its affiliates.

Last updated 2025-08-11 UTC.

[[["Easy to understand","easyToUnderstand","thumb-up"],["Solved my problem","solvedMyProblem","thumb-up"],["Other","otherUp","thumb-up"]],[["Missing the information I need","missingTheInformationINeed","thumb-down"],["Too complicated / too many steps","tooComplicatedTooManySteps","thumb-down"],["Out of date","outOfDate","thumb-down"],["Samples / code issue","samplesCodeIssue","thumb-down"],["Other","otherDown","thumb-down"]],["Last updated 2025-08-11 UTC."],[],[]]

- ### Contribute
  - [File a bug](https://issuetracker.google.com/issues/new?component=1400036&template=1897236)
  - [See open issues](https://issuetracker.google.com/issues?q=status:open%20componentid:1400036&s=created_time:desc)

- ### Related content
  - [Chromium updates](https://blog.chromium.org/)
  - [Case studies](https://developer.chrome.com/case-studies)
  - [Archive](https://developer.chrome.com/deprecated)
  - [Podcasts & shows](https://web.dev/shows)

- ### Follow
  - [@ChromiumDev on X](https://twitter.com/ChromiumDev)
  - [YouTube](https://www.youtube.com/user/ChromeDevelopers)
  - [Chrome for Developers on LinkedIn](https://www.linkedin.com/showcase/chrome-for-developers)
  - [RSS](https://developer.chrome.com/static/blog/feed.xml)

- [Terms](https://policies.google.com/terms)
- [Privacy](https://policies.google.com/privacy)
- [Manage cookies](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent#)

- [English](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent)
- [Deutsch](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=de)
- [Español – América Latina](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=es-419)
- [Français](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=fr)
- [Indonesia](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=id)
- [Italiano](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=it)
- [Nederlands](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=nl)
- [Polski](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=pl)
- [Português – Brasil](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=pt-br)
- [Tiếng Việt](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=vi)
- [Türkçe](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=tr)
- [Русский](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=ru)
- [עברית](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=he)
- [العربيّة](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=ar)
- [فارسی](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=fa)
- [हिंदी](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=hi)
- [বাংলা](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=bn)
- [ภาษาไทย](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=th)
- [中文 – 简体](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=zh-cn)
- [中文 – 繁體](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=zh-tw)
- [日本語](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=ja)
- [한국어](https://developer.chrome.com/docs/extensions/reference/api/declarativeContent?hl=ko)
